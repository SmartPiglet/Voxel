(e=>{"function"==typeof define&&define.amd?define("generalSettings",e):e()})(function(){var i={template:"#vx-settings-share-menu",data(){return{active:null,presets:this.$root.config.editor.share.presets}},methods:{toggleActive(e){return this.active=e===this.active?null:e},usePreset(e){var t=this.presets[e];t&&this.$root.config.share.networks.push({type:e,key:e,label:t.label,icon:""})},deleteItem(t){this.$root.config.share.networks=this.$root.config.share.networks.filter(e=>e!==t)},isUsed(t){return!!this.$root.config.share.networks.find(e=>e.key===t)},addHeading(){this.$root.config.share.networks.push({type:"ui-heading",key:"ui-"+Math.random().toString(10).substr(2,5),label:"Heading"})},dragStart(){this.$refs["fields-container"].classList.add("drag-active")},dragEnd(){this.$refs["fields-container"].classList.remove("drag-active")}},computed:{hasUnusedPresets(){return Object.keys(this.presets).find(e=>!this.isUsed(e))}}},o={template:`
		<div class="ts-icon-picker ts-icon-picker-vue">
			<div class="icon-preview" v-html="previewMarkup" @click.prevent="openLibrary" :title="modelValue"></div>

				<a href="#" @click.prevent="uploadSVG" class="ts-button ts-outline">Upload SVG</a>
				<a v-if="allowFonticons !== false" href="#" @click.prevent="openLibrary" class="ts-button ts-outline">Choose Icon</a>
				<a v-if="modelValue" href="#" @click.prevent="clear" class="ts-button ts-outline icon-only"><i class="lar la-trash-alt icon-sm"></i></a>

		</div>
	`,props:["modelValue","allowFonticons"],data(){return{previewMarkup:""}},created(){this.preview(this.modelValue)},methods:{preview(e){Voxel_Icon_Picker.getIconPreview(e,e=>this.previewMarkup=e)},openLibrary(){Voxel_Icon_Picker.edit(this.modelValue,e=>{this.setValue(e.library+":"+e.value)})},uploadSVG(){Voxel_Icon_Picker.getSVG(e=>{this.setValue("svg:"+e.id)})},clear(){this.setValue("")},setValue(e){this.preview(e),this.$emit("update:modelValue",e)}}},s={template:`
		<input type="text" readonly :value="modelValue" @click="edit">
	`,props:["modelValue","tagGroups"],data(){return{previewMarkup:""}},methods:{edit(){Voxel_Dynamic.edit(this.modelValue,{groups:this.tagGroups,onSave:e=>{this.$emit("update:modelValue",e)}})}}};document.addEventListener("DOMContentLoaded",()=>{var e,t=document.getElementById("vx-general-settings");t&&((e=Vue.createApp({el:t,data(){return{config:null,props:{},state:{},tab:null,subtab:null,webhooks:{tab:"live",liveDetails:!1,testDetails:!1,editLiveDetails:!1,editTestDetails:!1},portal:{editIds:!1},db:{showAdvanced:!1},ipgeo:{activeProvider:null}}},created(){this.config=jQuery.extend(!0,this.config,JSON.parse(this.$options.el.dataset.config));try{this.props=jQuery.extend(!0,this.props,JSON.parse(this.$options.el.dataset.props))}catch(e){}var e=this.config.tab||Voxel_Backend.getSearchParam("tab");e&&(e=e.split("."),this.setTab(e[0],e[1]))},methods:{setTab(e,t=""){this.tab=e,this.subtab=t,this.config.tab=[e,t].filter(Boolean).join(".");var i=new URL(window.location);i.searchParams.set("tab",t?e+"."+t:e),window.history.replaceState(null,null,i)},editFooterText(e){let t=e.target.placeholder;Voxel_Dynamic.edit(this.config.emails.footer_text||t,{groups:{site:{label:"Site",type:"site"}},onSave:e=>{this.config.emails.footer_text=e===t?"":e}})},removeMenuLocation(e){confirm(Voxel_Config.l10n.confirmAction)&&this.config.nav_menus.custom_locations.splice(e,1)},addIpGeoProvider(e){this.config.ipgeo.providers.push({key:e.key})},getIpGeoProvider(t){return this.config.editor.ipgeo.providers.find(e=>e.key===t)},deleteIpGeoProvider(t){this.config.ipgeo.providers=this.config.ipgeo.providers.filter(e=>e.key!==t)},purgeStatsCache(t){t.target?.classList.add("vx-disabled"),jQuery.post(Voxel_Config.ajax_url+"&action=backend.statistics.purge_cache").always(e=>{t.target?.classList.remove("vx-disabled"),e.success?Voxel_Backend.alert(e.message):Voxel_Backend.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})},purgeTimelineCache(t){t.target?.classList.add("vx-disabled"),jQuery.post(Voxel_Config.ajax_url+"&action=backend.timeline.purge_cache").always(e=>{t.target?.classList.remove("vx-disabled"),e.success?Voxel_Backend.alert(e.message):Voxel_Backend.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})},currencyFormat(){return Voxel_Backend.helpers.currencyFormat(...arguments)},editOfflinePaymentNotes(e){Voxel_Dynamic.edit(this.config.offline_payments.notes_to_customer.content||"",{groups:{vendor:{label:"Vendor",type:"user"},customer:{label:"Customer",type:"user"},site:{label:"Site",type:"site"}},onSave:e=>{this.config.offline_payments.notes_to_customer.content=e}})}},computed:{remainingIpGeoProviders(){return this.config.editor.ipgeo.providers.filter(t=>!this.config.ipgeo.providers.find(e=>e.key===t.key))},$w(){return window}}})).component("share-menu",i),e.component("draggable",vuedraggable),e.component("icon-picker",o),e.component("field-key",Voxel_Backend.components.Field_Key),e.component("dtag-input",s),e.component("color-picker",Voxel_Backend.components.Color_Picker),e.mount(t))})});
